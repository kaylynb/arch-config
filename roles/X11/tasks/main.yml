---
- block:
  - name: install X11 packages
    package:
      name:
        - xorg-server
        - xorg-xinput
        - xorg-xmodmap
        - xorg-xrandr
        - xorg-xrdb
      state: present

  - name: install X11 display size configuration
    template:
      src: 90-monitor-scale.conf
      dest: /etc/X11/xorg.conf.d/
      mode: 0644
    when: X11_display_size is defined

  - name: install systemd user xsession target
    copy:
      src: xsession.target
      dest: /etc/systemd/user/
      mode: 0644
    notify: reload systemd user daemon

  - meta: flush_handlers

  become: true

- import_tasks: keyboard.yml
- import_tasks: mouse.yml

- name: install Xresources
  template:
    src: Xresources
    dest: ~/.Xresources
    mode: 0444

- name: install xrdb init
  copy:
    src: xprofile.d/xrdb
    dest: ~/.xprofile.d/xrdb
    mode: 0444

- name: install .xsession file
  copy:
    src: xsession
    dest: ~/.xsession
    mode: 0544
